<main class="layout-container">
  <app-carousel></app-carousel>

  <section class="produtos-section">
    <header class="section-header">
      <h2 class="section-title">
        Encontre a melhor oferta de produtos com nosso Alerta de Preço!
      </h2>
    </header>

    <div class="products-grid">
      @if(products && products.length > 0) { @for(product of products; track
      product.id) {
      <article class="product-card" (click)="goToProduct(product.id)">
        <figure class="product-image">
          <img
            [src]="'data:image/png;base64,' + product.imageContent"
            [alt]="product.title"
            loading="lazy"
          />
        </figure>

        <div class="product-info">
          <h3 class="product-title">{{product.title}}</h3>

          <div class="product-pricing">
            <span class="current-price"
              >R$ {{product.bestPrice | number:'1.2-2':'pt'}}</span
            >
          </div>

          <div class="best-offer">
            <span class="offer-label"
              >Menor preço via {{product.sellerName}}</span
            >
            <div class="offer-status">
              <i class="pi pi-circle-fill status-icon"></i>
              <span class="status-text"
                >Comparar preço • {{ product.offers }} lojas</span
              >
            </div>
          </div>
        </div>
      </article>
      } } @else if(isLoading) {

      <div class="loading-state">
        <div class="spinner"></div>
        <p>Carregando produtos...</p>
      </div>
      } @else {

      <div class="empty-state">
        <i class="pi pi-search empty-icon"></i>
        <h2>Nenhum produto encontrado</h2>
        <p>Não foi possível carregar os produtos no momento</p>
      </div>
      }
    </div>
  </section>
  <img
    src="assets/image/banner-info.png"
    class="banner-promocional"
    alt="Banner promocional"
  />
</main>
